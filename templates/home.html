{% extends "base.html" %}
{% block title %}{{title}}{% endblock title %}
{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
{% endblock css %}
{% block content %}
<div class="container">
    <div class="row no-gutters">
      <div class="col-md-4 border-right">
        <div class="settings-tray">
          <img class="profile-image" src="{{url_for('static', filename=current_user.avatar)}}" alt="Profile img">
          <span class="settings-tray--right">
            <i class="material-icons">cached</i>
            <i class="material-icons">message</i>
            <i class="material-icons">menu</i>
          </span>
        </div>
        <div class="search-box">
          <div class="input-wrapper">
            <i class="material-icons">search</i>
            <input placeholder="Search here" type="text">
          </div>
        </div>
        {% for conversation in list_conversation %}
          <div class="friend-drawer friend-drawer--onhover">
            <img class="profile-image" src="{{url_for('static', filename=conversation.sender.avatar)}}" alt="">
            <div class="text">
              {% if conversation.conversation.type.lower() == "private" %}
                <h6>{{ conversation.participant.title }}</h6>
                <p class="text-muted">{{ conversation.message }}</p>
              {% else %}
                <h6>{{ conversation.conversation.title }}</h6>
                <p class="text-muted"><strong>{{ conversation.participant.title }}</strong>: {{ conversation.message }}</p>
              {% endif %}
            </div>
            <span class="time text-muted small">{{ conversation.created_at.as_datetime().strftime("%H:%M:%S, %m/%d/%Y") }}</span>
          </div>
          <hr>
        {% endfor %}
      </div>
      <div class="col-md-8">
        <div class="settings-tray">
            <div class="friend-drawer no-gutters friend-drawer--grey">
            <img class="profile-image" src="https://www.clarity-enhanced.net/wp-content/uploads/2020/06/robocop.jpg" alt="">
            <div class="text">
              <h6>Robo Cop</h6>
              <p class="text-muted">Layin' down the law since like before Christ...</p>
            </div>
            <span class="settings-tray--right">
              <i class="material-icons">cached</i>
              <i class="material-icons">message</i>
              <i class="material-icons">menu</i>
            </span>
          </div>
        </div>
        <div class="chat-panel">
          <div class="row no-gutters">
            <div class="col-md-3">
              <div class="chat-bubble chat-bubble--left">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row no-gutters">
            <div class="col-md-3 offset-md-9">
              <div class="chat-bubble chat-bubble--right">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row no-gutters">
            <div class="col-md-3 offset-md-9">
              <div class="chat-bubble chat-bubble--right">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row no-gutters">
            <div class="col-md-3">
              <div class="chat-bubble chat-bubble--left">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row no-gutters">
            <div class="col-md-3">
              <div class="chat-bubble chat-bubble--left">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row no-gutters">
            <div class="col-md-3">
              <div class="chat-bubble chat-bubble--left">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row no-gutters">
            <div class="col-md-3 offset-md-9">
              <div class="chat-bubble chat-bubble--right">
                Hello dude!
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <div class="chat-box-tray">
                <i class="material-icons">sentiment_very_satisfied</i>
                <input type="text" placeholder="Type your message here...">
                <i class="material-icons">mic</i>
                <i class="material-icons">send</i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
{% endblock content %}
{% block js %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
<script type="text/javascript" charset="utf-8">
    var socket = io();
    socket.on('connect', function() {
      console.log("Socket connected");
    });
</script>
{% endblock js %}